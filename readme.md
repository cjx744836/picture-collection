### 采集指定网站的图片，仅供学习参考，本人不改bug，不要提交issues，请自行fork后修改

* 多进程，一个解析进程负责解析html获取a标签的链接地址和img的地址并把解析到的img地址传给图片下载进程，多个（默认8个）图片下载进程

* 采集频率设定，防止被网站屏蔽

* 图片大小过滤，只下载满足条件的图片

* 可采集指定属性的图片，除了采集src属性外，还会采集指定的属性值，比如<img data-img="xxxxxx">，有些网站的图片地址并没有放在src上，所以要指定属性采集

* 做了base解析，有时候有些网站指定了base后，所有链接会根据base进行解析

* 做了referer开关，有时候有些网站需要指定一个referer才能下载图片，有时候又不需要

* 所有图片都会经过hash运算，防止下载到重复的图片，下载的图片会默认放在项目路径下的img文件夹中，根据域名命名文件夹

* 删除图片，分为仅删除图片和删除图片以及文件夹，预留两种删除方式，是因为有时候，确实只想删除图片而不删除文件夹，是想有个域名记录，如果填写了网址，会只删除网址相应域名下的图片，如果没有填写，会删除所有的

* 多种布局方式，1行1列到10行10列任选，方便查看图片

* 内置viewerjs可以点击图片进行放大缩小

* 全屏功能下，如果设置1行2列，流览效果会好一点

* 分页是为了防止下载的图片数量过多时，一页显示的话会让浏览器卡死，支持左右键翻页，上下键滚动不灵的时候需要点击一下页面中图片之间的空隙让页面获得焦点

* 只采集同域名下的链接，网站中的外链是不会采集的

图片单次采集上限默认10万个，去重，防止重复采集浪费资源，图片达到上限，图片下载进程和解析进程退出

链接单次采集上限默认10万个，去重，防止重复采集浪费资源，达到上限，解析进程退出，图片下载进程下载完已有的图片退出进程

至于cookie设置，没有这项功能，你可以根据需求去修改相应的代码，实现

所有采集的后的图片，都是在单次中可以在页面中浏览，是通过websocket实时回传的本地下载的图片地址，下次要再访问上次下载的图片，请直接到img目录中去浏览，或者你可以自行增加数据库去处理，方便下次在页面中浏览

```
npm run start
```

express默认端口6001，项目启动后，访问http://127.0.0.1:6001

websocket默认端口3002